<div class="card-header" style="margin-left:0.5%;margin-bottom: 2%;">
  <p>
    <mat-expansion-panel [(expanded)]="xpandStatus" hideToggle>
      <mat-expansion-panel-header
        style="background-color:#CC0000;height:2.5rem;"
      >
        <mat-panel-title style="color:#fff;justify-content: end;"
          >Search</mat-panel-title
        >
        <mat-panel-description class="right-aligned">
          <mat-icon>arrow_drop_down</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div class="row col-xl-13">
        <div class="col-xl-2">
          <div class="form-group">
            <label class="SearchBold">Business Segment</label>
            <input
              type="text"
              placeholder="Pick one"
              aria-label="Search"
              matInput
              [(ngModel)]="selectedBusinessNameMain"
              [matAutocomplete]="auto"
              (input)="filter()"
            />
            <mat-autocomplete #auto="matAutocomplete">
              <mat-option
                *ngFor="let option of BusinessNameMain"
                [value]="option.Code"
                style="font-size:11px;"
              >
                {{ option.State }}
              </mat-option>
            </mat-autocomplete>
          </div>
        </div>
        <div class="col-xl-2">
          <div class="form-group">
            <label class="SearchBold">State</label>
            <mat-select
              style="font-size:11px;border-bottom:1px solid grey;"
              (selectionChange)="onStateChange($event)"
              [(value)]="selectedStateMain"
            >
              <mat-option
                *ngFor="let option of StateMain"
                [value]="option.Code"
                style="font-size:11px;"
              >
                {{ option.State }}
              </mat-option>
            </mat-select>
          </div>
        </div>
        <div class="col-xl-2">
          <div class="form-group">
            <label class="SearchBold">County</label>
            <div>
              <input
                matInput
                placeholder=""
                [(ngModel)]="selectedCountyMain"
                style="font-size:11px;border-bottom:1px solid grey;margin-top:0.5%;"
              />
            </div>
          </div>
        </div>
        <div class="col-xl-2">
          <div class="form-group">
            <label class="SearchBold">City</label>
            <div>
              <input
                matInput
                placeholder=""
                [(ngModel)]="selectedCityMain"
                style="font-size:11px;border-bottom:1px solid grey;margin-top:0.5%;"
              />
            </div>
          </div>
        </div>
        <div class="col-xl-2">
          <div class="form-group">
            <label class="SearchBold">Zip Code</label>
            <div>
              <input
                matInput
                placeholder=""
                [(ngModel)]="selectedZipCodeMain"
                style="font-size:11px;border-bottom:1px solid grey;margin-top:0.5%;"
              />
            </div>
          </div>
        </div>
        <div class="col-xl-2">
          <div class="form-group">
            <label class="SearchBold">Store Number</label>
            <div>
              <input
                matInput
                placeholder=""
                [(ngModel)]="selectedShopNumberMain"
                style="font-size:11px;border-bottom:1px solid grey;margin-top:0.5%;"
              />
            </div>
          </div>
        </div>
      </div>
      <div class="row col-xl-13">
        <div class="col-xl-2">
          <div class="form-group">
            <label class="SearchBold">License Type</label>
            <mat-select
              style="font-size:11px;border-bottom:1px solid grey;"
              (selectionChange)="onLicenseTypeChange($event)"
              [(value)]="selectedLicenseTypeMain"
            >
              <mat-option
                *ngFor="let option of LicenseTypeMain"
                [value]="option.Code"
                style="font-size:11px;"
              >
                {{ option.State }}
              </mat-option>
            </mat-select>
          </div>
        </div>
        <div class="col-xl-2">
          <div class="form-group">
            <label class="SearchBold">License Number</label>
            <div>
              <input
                matInput
                placeholder=""
                [(ngModel)]="selectedLicenseNumberMain"
                style="font-size:11px;border-bottom:1px solid grey;margin-top:0.5%;"
              />
            </div>
          </div>
        </div>
        <div class="col-xl-2">
          <div class="form-group" style="margin-top:-0.2rem;">
            <div style="margin-top:0.5rem;">
              <label class="SearchBold">Expiry Date</label>
            </div>
            <div style="margin-top:-0.5rem;">
              <mat-date-range-input
                [rangePicker]="picker"
                style="display: inline-table;width:78%;border-bottom:1px solid grey;"
              >
                <input
                  matStartDate
                  placeholder="Start date"
                  [(ngModel)]="selectedExpiryDateStartMain"
                  #dateRangeStart
                />
                <input
                  matEndDate
                  placeholder="End date"
                  [(ngModel)]="selectedExpiryDateEndMain"
                  #dateRangeEnd
                />
              </mat-date-range-input>
              <mat-datepicker-toggle
                matSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-date-range-picker #picker></mat-date-range-picker>
            </div>
          </div>
        </div>
        <div class="col-xl-2">
          <div class="form-group" style="margin-top:-0.2rem;">
            <div style="margin-top:0.5rem;">
              <label class="SearchBold" style="margin-top:0.2rem;"
                >Upload Date</label
              >
            </div>
            <div style="margin-top:-0.5rem;">
              <mat-date-range-input
                [rangePicker]="pickerU"
                style="display: inline-table;width:78%;border-bottom:1px solid grey;"
              >
                <input
                  matStartDate
                  placeholder="Start date"
                  [(ngModel)]="selectedUploadDateStartMain"
                  #dateRangeUploadStart
                />
                <input
                  matEndDate
                  placeholder="End date"
                  [(ngModel)]="selectedUploadDateEndMain"
                  #dateRangeUploadEnd
                />
              </mat-date-range-input>
              <mat-datepicker-toggle
                matSuffix
                [for]="pickerU"
              ></mat-datepicker-toggle>
              <mat-date-range-picker #pickerU></mat-date-range-picker>
            </div>
          </div>
        </div>
        <div class="col-xl-2">
          <div class="form-group" style="margin-top:-0.2rem;">
            <div style="margin-top:0.5rem;">
              <label class="SearchBold" style="margin-top:0.2rem;"
                >Issue Date</label
              >
            </div>
            <div style="margin-top:-0.5rem;">
              <mat-date-range-input
                [rangePicker]="pickerI"
                style="display: inline-table;width:78%;border-bottom:1px solid grey;"
              >
                <input
                  matStartDate
                  placeholder="Start date"
                  #dateRangeIssueStart
                  [(ngModel)]="selectedIssueDateStartMain"
                />
                <input
                  matEndDate
                  placeholder="End date"
                  #dateRangeIssueEnd
                  [(ngModel)]="selectedIssueDateEndMain"
                />
              </mat-date-range-input>
              <mat-datepicker-toggle
                matSuffix
                [for]="pickerI"
              ></mat-datepicker-toggle>
              <mat-date-range-picker #pickerI></mat-date-range-picker>
            </div>
          </div>
        </div>
        <div class="col-xl-2">
          <input
            type="button"
            (click)="searchAPI()"
            value="Search"
            class="btn search-btn Search buttonColor"
          />
          &nbsp;
          <input
            type="button"
            (click)="ClearMain()"
            value="Clear"
            class="btn search-btn Search buttonColor"
          />
        </div>
      </div>
    </mat-expansion-panel>
  </p>
</div>

<div class="container">
  <div class="row">
    <div style="width:80%;margin-left:1rem;">
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
        <!-- Checkbox Column -->
        <ng-container matColumnDef="Select">
          <th mat-header-cell *matHeaderCellDef></th>
        </ng-container>
        <ng-container matColumnDef="BusniessSegment">
          <th mat-header-cell *matHeaderCellDef>Business Segment</th>
          <td mat-cell *matCellDef="let element">{{ element.BusinessName }}</td>
        </ng-container>
        <ng-container matColumnDef="State">
          <th mat-header-cell *matHeaderCellDef>State</th>
          <td mat-cell *matCellDef="let element">{{ element.State }}</td>
        </ng-container>
        <ng-container matColumnDef="County">
          <th mat-header-cell *matHeaderCellDef>County</th>
          <td mat-cell *matCellDef="let element">{{ element.County }}</td>
        </ng-container>
        <ng-container matColumnDef="City">
          <th mat-header-cell *matHeaderCellDef>City</th>
          <td mat-cell *matCellDef="let element">{{ element.City }}</td>
        </ng-container>

        <ng-container matColumnDef="ZipCode">
          <th mat-header-cell *matHeaderCellDef>ZipCode</th>
          <td mat-cell *matCellDef="let element">{{ element.ZipCode }}</td>
        </ng-container>

        <ng-container matColumnDef="ShopNumber">
          <th mat-header-cell *matHeaderCellDef>Store Number</th>
          <td mat-cell *matCellDef="let element">{{ element.ShopNumber }}</td>
        </ng-container>
        <ng-container matColumnDef="ExpiryDate">
          <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
          <td mat-cell *matCellDef="let element">
            {{ getFormattedDate(element.ExpiryDate) }}
          </td>
        </ng-container>
        <ng-container matColumnDef="LicenseNumber">
          <th mat-header-cell *matHeaderCellDef>License Number</th>
          <td mat-cell *matCellDef="let element">
            {{ element.LicenseNumber }}
          </td>
        </ng-container>

        <ng-container matColumnDef="Download">
          <th mat-header-cell *matHeaderCellDef>Print</th>
          <td mat-cell *matCellDef="let row">
            <button
              class="btn search-btn Search buttonColor"
              style="margin-top:-2%;"
              printSectionId="print-section"
              ngxPrint
              [disabled]="!selection.isSelected(row)"
            >
              Print
            </button>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          (click)="selection.toggle(row)"
        ></tr>
      </table>

      <mat-paginator
        [pageSizeOptions]="[5, 10, 20]"
        [pageSize]="5"
        showFirstLastButtons
        aria-label="Select page of periodic elements"
      >
      </mat-paginator>
    </div>
  </div>
</div>
